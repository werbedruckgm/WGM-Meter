<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WGM-Meter | Werbedruck GM</title>
    <style>
        :root {
            --primary-orange: #f37021;
            --bg-light-gray: #f2f2f2; 
            --card-bg: #ffffff;
            --text-main: #333333;
            --text-gray: #666666;
            --bt-blue: #007AFF;
        }
        html, body { height: 100%; overflow: hidden; background: var(--bg-light-gray); font-family: sans-serif; display: flex; justify-content: center; align-items: center; margin: 0; }
        .card { background: var(--card-bg); padding: 25px; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); width: 88%; max-width: 360px; border: 1px solid #e0e0e0; position: relative; }
        
        /* Auswahl-Elemente oben */
        .top-controls { position: absolute; top: 15px; left: 15px; right: 15px; display: flex; justify-content: space-between; align-items: center; }
        select { font-size: 0.7em; padding: 4px; border-radius: 8px; border: 1px solid #ddd; background: #fff; outline: none; }

        .logo-container { text-align: center; margin-bottom: 10px; padding-top: 20px; }
        .logo-container img { max-width: 80%; height: auto; max-height: 80px; }
        .divider { height: 3px; background-color: var(--primary-orange); width: 100%; margin-bottom: 20px; border-radius: 2px; }
        .input-group { margin-bottom: 15px; }
        .label-with-icon { display: flex; align-items: center; margin-bottom: 5px; font-size: 0.7em; color: var(--text-gray); text-transform: uppercase; font-weight: 700; }
        input { width: 100%; padding: 12px; border: 2px solid #eeeeee; border-radius: 12px; font-size: 16px; box-sizing: border-box; }
        input:focus { outline: none; border-color: var(--primary-orange); }
        .result-box { margin-top: 10px; padding: 15px; background: var(--primary-orange); border-radius: 18px; text-align: center; color: white; }
        .result-val { font-size: 2em; font-weight: 800; display: block; }
        .bt-button { background: var(--bt-blue); color: white; border: none; border-radius: 12px; padding: 12px; font-size: 0.75em; font-weight: bold; margin-top: 20px; width: 100%; cursor: pointer; }
        
        footer { margin-top: 15px; text-align: center; font-size: 0.65em; color: var(--text-gray); line-height: 1.6; }
        footer a { color: var(--text-gray); text-decoration: none; font-weight: bold; }
        .legal-links { margin-top: 8px; }
    </style>
</head>
<body>

<div class="card">
    <div class="top-controls">
        <select id="unitPicker" onchange="calc()">
            <option value="mm">mm</option>
            <option value="inc">inch</option>
        </select>
        <select id="langPicker" onchange="changeLang()">
            <option value="de">DE</option>
            <option value="en">EN</option>
            <option value="fr">FR</option>
            <option value="nl">NL</option>
            <option value="pl">PL</option>
            <option value="es">ES</option>
            <option value="it">IT</option>
            <option value="hu">HU</option>
            <option value="ru">RU</option>
            <option value="ja">JA</option>
        </select>
    </div>

    <div class="logo-container"><img src="wgm-applogo.jpg" alt="Werbedruck GM"></div>
    <div class="divider"></div>

    <div class="input-group">
        <div class="label-with-icon" id="lbl_D">Rollendurchmesser (mm)</div>
        <input type="number" id="D" inputmode="decimal" placeholder="..." oninput="calc()" autofocus>
    </div>
    <div class="input-group">
        <div class="label-with-icon" id="lbl_d">Kerndurchmesser (mm)</div>
        <input type="number" id="d" inputmode="decimal" value="84" oninput="calc()">
    </div>
    <div class="input-group">
        <div class="label-with-icon" id="lbl_s">Materialst√§rke (mm)</div>
        <input type="number" id="s" inputmode="decimal" value="0.22" step="0.01" oninput="calc()">
    </div>

    <div class="result-box">
        <span id="lbl_res_text" style="font-size: 0.7em; text-transform: uppercase; font-weight: bold;">Material auf der Rolle</span>
        <span class="result-val" id="res">0.00 m</span>
    </div>

    <button class="bt-button" id="btn_bt" onclick="connectBluetooth()">üîµ MESS-GER√ÑT VERBINDEN</button>
    
    <footer>
        <strong>Werbedruck GM</strong><br>
        <span id="lbl_footer">V1.9.5 Multi-Unit & Bluetooth</span><br>
        <div class="legal-links">
            <a href="https://www.deine-werbewerkstatt.de/Impressum/" target="_blank" id="lbl_imp">Impressum</a> | 
            <a href="https://www.deine-werbewerkstatt.de/datenschutz/" target="_blank" id="lbl_priv">Datenschutz</a>
        </div>
    </footer>
</div>

<script>
const translations = {
    de: { D: "Rollendurchmesser", d: "Kerndurchmesser", s: "Materialst√§rke", res: "Material auf der Rolle", bt: "üîµ MESS-GER√ÑT VERBINDEN", foot: "V1.9.5 Multi-Unit & Bluetooth", imp: "Impressum", priv: "Datenschutz" },
    en: { D: "Roll Diameter", d: "Core Diameter", s: "Material Thickness", res: "Material on Roll", bt: "üîµ CONNECT CALIPER", foot: "V1.9.5 Multi-Unit & Bluetooth", imp: "Imprint", priv: "Privacy" },
    fr: { D: "Diam√®tre du rouleau", d: "Diam√®tre du noyau", s: "√âpaisseur du mat√©riau", res: "Mat√©riau sur rouleau", bt: "üîµ CONNECTER LE PIED", foot: "V1.9.5 Multilingue", imp: "Mentions l√©gales", priv: "Confidentialit√©" },
    nl: { D: "Roldiameter", d: "Kerndiameter", s: "Materiaaldikte", res: "Materiaal op rol", bt: "üîµ SCHUIFMAAT VERBINDEN", foot: "V1.9.5 Meertalig", imp: "Colofon", priv: "Privacy" },
    pl: { D: "≈örednica rolki", d: "≈örednica rdzenia", s: "Grubo≈õƒá materia≈Çu", res: "Materia≈Ç na rolce", bt: "üîµ PO≈ÅƒÑCZ SUWMIARKƒò", foot: "V1.9.5 Wielojƒôzyczny", imp: "Nota prawna", priv: "Prywatno≈õƒá" },
    hu: { D: "Tekercs √°tm√©r≈ë", d: "Mag√°tm√©r≈ë", s: "Anyagvastags√°g", res: "Anyag a tekercsen", bt: "üîµ TOL√ìM√âR≈ê CSATLAKOZTAT√ÅSA", foot: "V1.9.5 T√∂bbnyelv≈±", imp: "Impresszum", priv: "Adatv√©delem" },
    ru: { D: "–î–∏–∞–º–µ—Ç—Ä —Ä—É–ª–æ–Ω–∞", d: "–î–∏–∞–º–µ—Ç—Ä –≤—Ç—É–ª–∫–∏", s: "–¢–æ–ª—â–∏–Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞", res: "–ú–∞—Ç–µ—Ä–∏–∞–ª –≤ —Ä—É–ª–æ–Ω–µ", bt: "üîµ –ü–û–î–ö–õ–Æ–ß–ò–¢–¨ –ü–†–ò–ë–û–†", foot: "V1.9.5 –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π", imp: "–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ", priv: "–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å" },
    es: { D: "Di√°metro del rollo", d: "Di√°metro del n√∫cleo", s: "Grosor del material", res: "Material en el rollo", bt: "üîµ CONECTAR CALIBRADOR", foot: "V1.9.5 Multiling√ºe", imp: "Aviso Legal", priv: "Privacidad" },
    it: { D: "Diametro rotolo", d: "Diametro anima", s: "Spessore materiale", res: "Materiale sul rotolo", bt: "üîµ CONNETTI CALIBRO", foot: "V1.9.5 Multilingua", imp: "Note Legali", priv: "Privacy" },
    ja: { D: "„É≠„Éº„É´Áõ¥ÂæÑ", d: "ËäØ„ÅÆÁõ¥ÂæÑ", s: "ÊùêÊñô„ÅÆÂéö„Åï", res: "„É≠„Éº„É´‰∏ä„ÅÆÊùêÊñô", bt: "üîµ „Éé„ÇÆ„Çπ„ÇíÊé•Á∂ö„Åô„Çã", foot: "V1.9.5 Â§öË®ÄË™ûÂØæÂøú", imp: "„Ç§„É≥„Éó„É™„É≥„Éà", priv: "„Éó„É©„Ç§„Éê„Ç∑„Éº" }
};

function changeLang() {
    const l = document.getElementById('langPicker').value;
    const u = document.getElementById('unitPicker').value;
    const unitText = "(" + u + ")";
    
    document.getElementById('lbl_D').innerText = translations[l].D + " " + unitText;
    document.getElementById('lbl_d').innerText = translations[l].d + " " + unitText;
    document.getElementById('lbl_s').innerText = translations[l].s + " " + unitText;
    document.getElementById('lbl_res_text').innerText = translations[l].res;
    document.getElementById('btn_bt').innerText = translations[l].bt;
    document.getElementById('lbl_footer').innerText = translations[l].foot;
    document.getElementById('lbl_imp').innerText = translations[l].imp;
    document.getElementById('lbl_priv').innerText = translations[l].priv;
}

function calc() {
    const unit = document.getElementById('unitPicker').value;
    changeLang(); // Update labels
    
    let D = parseFloat(document.getElementById('D').value.replace(',', '.'));
    let d = parseFloat(document.getElementById('d').value.replace(',', '.'));
    let s = parseFloat(document.getElementById('s').value.replace(',', '.'));

    if(D && d && s && D > d) {
        // Wenn Inch gew√§hlt ist, alles intern in mm umrechnen f√ºr die Meter-Formel
        if(unit === "inc") {
            D = D * 25.4;
            d = d * 25.4;
            s = s * 25.4;
        }
        const L = (Math.PI * (Math.pow(D, 2) - Math.pow(d, 2))) / (4000 * s);
        document.getElementById('res').innerText = L.toFixed(2) + " m";
    } else { document.getElementById('res').innerText = "0.00 m"; }
}

async function connectBluetooth() {
    if (!navigator.bluetooth) { alert("Bluetooth not supported."); return; }
    try { await navigator.bluetooth.requestDevice({ acceptAllDevices: true }); } catch (e) {}
}
</script>
</body>
</html>
